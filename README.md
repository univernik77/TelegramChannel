# Набор скриптов для получения фотографий с запусков SpaceX, фотографии дня и фотографии Земли от NASA, с возможностью выборочного и автоматического постинга в Телеграм канал.


Данный набор скриптов состоит из 5 основных и 1 вспомогательного.  

Основные:  

* `fetch_spacex_images.py` загрузка фотографии с запусков SpaceX `
* `fetch_nasa_apod.py` загрузка лучших астрономических фотографии дня от NASA 
* `fetch_nasa_epic.py` загрузка фотографий земли от NASA 
* `one_post_space_telegram_bot.py` публикация одной фотографии в Телеграм канал.
* `autopost_space_telegram_bot.py` автоматическая публикация в Телеграм канал.
  
Вспомогательные:
* `split_text_util.py` обслуживание скриптов `fetch_spacex_images.py`, `fetch_nasa_apod.py`
 

## Запуск  

**Важно.** Для запуска скриптов вам потребуется ключ API. Он доступен после регистрации на сайте [https://api.nasa.gov/#apod](https://api.nasa.gov/#apod).  

**Важно.** Для запуска скриптов для публикации фотографии вам потребуется Телеграм-бот, Телеграм-канал и токен для доступа к Телеграмм-боту. Инструкция: как зарегистрировать Телеграм-бота, создать Телеграм-канал и получить токен (https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/)[https://smmplanner.com/blog/otlozhennyj-posting-v-telegram/].

Для запуска скриптов у вас уже должен быть установлен Python 3.

- Скачайте код
- Основной и вспомогательные скрипты должны лежать в одной папке.
- Установите зависимости командой `pip install -r requirements.txt`
- Запустите скрипт командой `python3 ...`

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с `manage.py` и запишите туда данные в таком формате: `ПЕРЕМЕННАЯ=значение`.

Доступны 3 переменные:
- `API_KEY ` — ключ для доступа к скачиванию фотографии от NASA
- `TELEGRAM_TOKEN ` — токен для доступа к вашему Телеграм каналу.
- `PATH_TO_FILE` — папка, где будут храниться скаченные файлы.


## Описание основных скриптов


### Загрузка фотографий с запуска SpaceX `fetch_spacex_images.py`  

Запускается с аргументом: id запуска. Создает папку, в случае если ее не существует и сохраняет, полученные фотографии в нее. 

![](/home/nickolay/Изображения/Снимки экрана/Снимок экрана от 2023-11-04 16-34-03.png)  

В случае, если для данного запуска не было фотографии, загружаются фотографии с последнего запуска, где они были сделаны. Результат выполения скрипта:  

![](/home/nickolay/Изображения/Снимки экрана/Result spacex.png)


### Загрузка лучших астрономических фотографий дня `fetch_nasa_apod.py`  

Запускается с аргументом: требуемое количество фотографий. Создает папку, в случае если ее не существует и сохраняет, полученные фотографии в нее.

![](/home/nickolay/Изображения/Снимки экрана/Launch apod.png)  

Если аргумент не указан, загружает по умолчанию 30 фотографий. Пример полученного результата, выполнения скрипта:

![](/home/nickolay/Изображения/Снимки экрана/Result apod.png)  

### Загрузка фотографий Земли `fetch_nasa_epic.py`  

Запускается с аргументом: требуемое количество фотографий. Создает папку, в случае если ее не существует и сохраняет, полученные фотографии в нее.

![](/home/nickolay/Изображения/Снимки экрана/Запуск epic.png)

Если аргумент не указан, загружает по умолчанию 10 фотографий. Пример выполнения скрипта:

![](/home/nickolay/Изображения/Снимки экрана/Result epic.png)  

### Публикация одной фотографии в Телеграм-канал `one_post_space_telegram_bot.py`  

Запускается с аргументом: путь к файлу. Публикует с помощью бота, выбранную фотографию в Телеграм-канал.

![](/home/nickolay/Изображения/Снимки экрана/Launch one post.png)  

Если аргумент не указан, выводит на экран предупреждение. Пример выполнения скрипта:

![](/home/nickolay/Изображения/Снимки экрана/Result one post.png)  

### Автоматическая публикация фотографий в Телеграм-канал `one_post_space_telegram_bot.py`  

Запускается с аргументом: интервал публикаций в секундах. Публикует с помощью бота фотографии в Телеграм-канал.

![](/home/nickolay/Изображения/Снимки экрана/Launch auto.png)

Если аргумент не указан, интервал по умолчанию 4 часа. Пример выполнения скрипта:

![](/home/nickolay/Изображения/Снимки экрана/Result auto.png)  

## Описание вспомогательных скриптов  

### `split_text_util.py` 

Возвращает изначальное расширение файла. 

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).